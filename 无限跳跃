-- 无限跳跃功能
local InfiniteJumpEnabled = false
local isJumpAnimating = false

-- 无限跳跃功能
JumpToggleBackground.MouseButton1Click:Connect(function()
    if isJumpAnimating then return end
    
    InfiniteJumpEnabled = not InfiniteJumpEnabled
    isJumpAnimating = true
    
    local targetPosition
    if InfiniteJumpEnabled then
        targetPosition = UDim2.new(0, 30, 0, 0)
        JumpToggleBackground.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    else
        targetPosition = UDim2.new(0, 0, 0, 0)
        JumpToggleBackground.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    end
    
    local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = game:GetService("TweenService"):Create(JumpToggleSlider, tweenInfo, {Position = targetPosition})
    tween:Play()
    
    tween.Completed:Connect(function()
        isJumpAnimating = false
    end)
end)

game:GetService("UserInputService").JumpRequest:connect(function()
    if InfiniteJumpEnabled and character and character:FindFirstChildOfClass'Humanoid' then
        character:FindFirstChildOfClass'Humanoid':ChangeState("Jumping")
    end
end)
