-- 在 BasicFrame 创建后添加
local JumpLabel = Instance.new("TextLabel")
JumpLabel.Name = "JumpLabel"
JumpLabel.Parent = BasicFrame
JumpLabel.BackgroundTransparency = 1
JumpLabel.Position = UDim2.new(0, 20, 0, -30)
JumpLabel.Size = UDim2.new(0, 200, 0, 30)
JumpLabel.Text = "无限跳跃"
JumpLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
JumpLabel.TextSize = 18
JumpLabel.TextXAlignment = Enum.TextXAlignment.Left
JumpLabel.Font = Enum.Font.SourceSansBold

local JumpToggleBackground = Instance.new("TextButton")
JumpToggleBackground.Name = "JumpToggleBackground"
JumpToggleBackground.Parent = BasicFrame
JumpToggleBackground.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
JumpToggleBackground.BorderSizePixel = 0
JumpToggleBackground.Position = UDim2.new(0, 380, 0, -30)
JumpToggleBackground.Size = UDim2.new(0, 60, 0, 30)
JumpToggleBackground.Text = ""
JumpToggleBackground.Active = true

local JumpToggleBackgroundCorner = Instance.new("UICorner")
JumpToggleBackgroundCorner.Parent = JumpToggleBackground
JumpToggleBackgroundCorner.CornerRadius = UDim.new(0, 15)

local JumpToggleSlider = Instance.new("Frame")
JumpToggleSlider.Name = "JumpToggleSlider"
JumpToggleSlider.Parent = JumpToggleBackground
JumpToggleSlider.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
JumpToggleSlider.BorderSizePixel = 0
JumpToggleSlider.Size = UDim2.new(0, 30, 0, 30)
JumpToggleSlider.Position = UDim2.new(0, 0, 0, 0)

local JumpToggleSliderCorner = Instance.new("UICorner")
JumpToggleSliderCorner.Parent = JumpToggleSlider
JumpToggleSliderCorner.CornerRadius = UDim.new(0, 15)

-- 无限跳跃功能变量和逻辑
local InfiniteJumpEnabled = false
local isJumpAnimating = false

JumpToggleBackground.MouseButton1Click:Connect(function()
    if isJumpAnimating then return end
    
    InfiniteJumpEnabled = not InfiniteJumpEnabled
    isJumpAnimating = true
    
    local targetPosition
    if InfiniteJumpEnabled then
        targetPosition = UDim2.new(0, 30, 0, 0)
        JumpToggleBackground.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    else
        targetPosition = UDim2.new(0, 0, 0, 0)
        JumpToggleBackground.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    end
    
    local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = game:GetService("TweenService"):Create(JumpToggleSlider, tweenInfo, {Position = targetPosition})
    tween:Play()
    
    tween.Completed:Connect(function()
        isJumpAnimating = false
    end)
end)

-- 无限跳跃功能实现
game:GetService("UserInputService").JumpRequest:Connect(function()
    if InfiniteJumpEnabled and character and character:FindFirstChildOfClass("Humanoid") then
        character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)
